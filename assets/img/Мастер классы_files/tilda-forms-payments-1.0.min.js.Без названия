function t_isEmptyObject(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}window.tildaForm.addPaymentInfoToForm=function(t){t instanceof Element||(t=t[0]);var e=document.getElementById("allrecords"),o=t.querySelector(".js-tilda-payment");o&&t_removeEl(o);t=0;window.tildaForm.tildapayment={},window.tildaForm.arProductsForStat=[],window.tildaForm.orderIdForStat="",window.tildaForm.amountForStat=0,window.tildaForm.currencyForStat="";o=e.getAttribute("data-tilda-currency")||"";o||(o=(e=document.querySelector(".t706"))?e.getAttribute("data-project-currency-code"):""),o?(window.tildaForm.currencyForStat=o,window.tildaForm.tildapayment.currency=o):window.tcart.currency&&(window.tildaForm.currencyForStat=window.tcart.currency,window.tildaForm.tildapayment.currency=window.tcart.currency);o=document.querySelector(".t-radio_delivery:checked");if(!window.tcart.delivery&&o&&0<parseInt(o.getAttribute("data-delivery-price"),10))try{return window.tildaForm.tildapayment=!1,window.location.reload(),!1}catch(t){}window.tildaForm.amountForStat=window.tcart.amount,window.tildaForm.tildapayment.amount=window.tcart.amount,window.tcart.system?window.tildaForm.tildapayment.system=window.tcart.system:window.tildaForm.tildapayment.system="auto",window.tcart.promocode&&window.tcart.promocode.promocode&&(window.tildaForm.tildapayment.promocode=window.tcart.promocode.promocode,window.tcart.prodamount_discountsum&&0<parseFloat(window.tcart.prodamount_discountsum)?(window.tildaForm.tildapayment.discount=window.tcart.prodamount_discountsum,t=window.tcart.prodamount_discountsum):window.tcart.amount_discountsum&&0<parseFloat(window.tcart.amount_discountsum)&&(window.tildaForm.tildapayment.discount=window.tcart.amount_discountsum,t=window.tcart.amount_discountsum),window.tcart.prodamount_withdiscount&&0<parseFloat(window.tcart.prodamount_withdiscount)&&(window.tildaForm.tildapayment.prodamount_withdiscount=window.tcart.prodamount_withdiscount),window.tcart.amount_withoutdiscount&&0<parseFloat(window.tcart.amount_withoutdiscount)&&(window.tildaForm.tildapayment.amount_withoutdiscount=window.tcart.amount_withoutdiscount)),window.tcart.prodamount&&0<parseFloat(window.tcart.prodamount)&&(window.tildaForm.tildapayment.prodamount=window.tcart.prodamount);var r=[],o=window.tcart.products;Array.prototype.forEach.call(o,function(t){t_isEmptyObject(t)||"yes"===t.deleted||r.push(t)}),window.tcart.products=r;o=(new Date).getTimezoneOffset();window.tildaForm.tildapayment.timezoneoffset=o;var a={},i="",n=0;window.tcart.products&&0<window.tcart.products.length&&(n=window.tcart.products.length),window.tildaForm.tildapayment.products=[];for(var s=0;s<n;s++){var d,c=window.tcart.products[s],a={},i="";for(d in window.tildaForm.tildapayment.products[s]={},c)if("function"!=typeof c[d])if("options"===d)for(var l in window.tildaForm.tildapayment.products[s][d]={},c[d])window.tildaForm.tildapayment.products[s][d][l]||(window.tildaForm.tildapayment.products[s][d][l]={}),c[d][l].option&&(window.tildaForm.tildapayment.products[s][d][l].option=c[d][l].option),c[d][l].price&&0<c[d][l].price&&(window.tildaForm.tildapayment.products[s][d][l].price=c[d][l].price),c[d][l].variant&&(window.tildaForm.tildapayment.products[s][d][l].variant=c[d][l].variant),c[d][l].option&&c[d][l].variant&&(i&&(i+=", "),i=i+c[d][l].option+":"+c[d][l].variant);else window.tildaForm.tildapayment.products[s][d]=c[d];c.sku?a.id=c.sku:c.uid&&(a.id=c.uid),a.name=c.name,c.price?(a.price=c.price,a.quantity=parseInt(c.amount/c.price)):c.quantity&&1<c.quantity?(a.price=c.amount/c.quantity,a.quantity=c.quantity):(a.price=c.amount,a.quantity=1),a.name=c.name,i&&(a.name=a.name+"("+i+")"),c.sku&&(a.sku=c.sku),c.uid&&(a.uid=c.uid),window.tildaForm.arProductsForStat.push(a)}o=0;window.tcart.delivery&&window.tcart.delivery.name&&(window.tildaForm.tildapayment.delivery={name:window.tcart.delivery.name},window.tcart.delivery&&0<=window.tcart.delivery.price&&(o=window.tcart.delivery.price,window.tildaForm.tildapayment.delivery.price=window.tcart.delivery.price,0<window.tcart.prodamount&&window.tcart.delivery.freedl&&0<window.tcart.delivery.freedl&&(window.tildaForm.tildapayment.delivery.freedl=window.tcart.delivery.freedl,window.tcart.prodamount-t>=window.tcart.delivery.freedl&&(o=0)),a={name:window.tcart.delivery.name,price:o,quantity:1,id:"delivery"},window.tildaForm.arProductsForStat.push(a)));try{Array.prototype.forEach.call(["city","street","pickup-name","pickup-address","pickup-id","house","entrance","floor","aptoffice","phone","entrancecode","comment","service-id","hash","postalcode","country","userinitials","onelineaddress"],function(t){window.tcart.delivery&&window.tcart.delivery[t]&&(window.tildaForm.tildapayment.delivery[t]=window.tcart.delivery[t])})}catch(t){console.log(t)}},window.tildaForm.payment=function(form,objNext){form instanceof Element||(form=form[0]);var successBox=form.querySelector(".js-successbox"),successBoxText;if("y"!==form.getAttribute("data-formpaymentoff")){if(successBox&&(successBoxText=successBox.textContent||successBox.innerText,successBoxText&&(form.tildaSuccessMessage=successBoxText),t_forms__getMsg("successorder")&&(successBox.innerHTML=t_forms__getMsg("successorder")),successBox.style.display="block"),t_addClass(form,"js-send-form-success"),"link"===objNext.type)return window.tildaForm.clearTCart(form),objNext.message&&successBox&&(successBox.innerHTML=objNext.message,successBox.style.display="block"),window.location.href=objNext.value,!0;if("form"===objNext.type){var paymentForm=document.getElementById("js-tilda-payment-formid"),strHtml="",valueKey="",key;for(key in paymentForm&&t_removeEl(paymentForm),strHtml='<form id="js-tilda-payment-formid" action="'+objNext.value.action+'" method="post"  style="position: absolue; opacity: 0; width: 1px; height: 1px; left: -5000px;">',objNext.value.action="",objNext.value)valueKey=objNext.value[key],"function"!=typeof valueKey&&valueKey&&(strHtml+="<input type='hidden' name='"+key+"' value='"+valueKey+"' >");strHtml+="</form>",document.body.insertAdjacentHTML("beforeend",strHtml),paymentForm=document.getElementById("js-tilda-payment-formid"),window.tildaForm.clearTCart(form),paymentForm.getAttribute("action")?paymentForm.submit():setTimeout(function(){paymentForm.submit()},200)}if("function"===objNext.type){var arrArgs=objNext.value.args;return objNext.value.functioncode?window.tildaForm.paysystemRun(objNext.value.script,objNext.value.sysname,form,objNext.value.functioncode,arrArgs):"undefined"!=typeof jQuery?eval(objNext.value.name+"($(form), arrArgs);"):eval(objNext.value.name+"(form, arrArgs);"),!1}window.tildaForm.clearTCart(form),"text"===objNext.type&&objNext.message&&successBox&&(successBox.innerHTML=objNext.message,successBox.style.display="block")}else window.tildaForm.clearTCart(form)},window.tildaForm.paysystemScriptLoad=function(t,e){if(!e||!t||"http"!==t.substring(0,4))return console.log("Wrong script parameters."),!1;var o;window.scriptSysPayment||(window.scriptSysPayment={}),window.scriptSysPayment[e]&&!0===window.scriptSysPayment[e]||((o=document.createElement("script")).type="text/javascript",o.src=t,document.body.appendChild(o),window.scriptSysPayment[e]=!0)},window.tildaForm.paysystemRun=function(linkScript,systemName,form,functionCode,arArgs){if(form instanceof Element||(form=form[0]),window.scriptSysPayment||(window.scriptSysPayment={}),!window.scriptSysPayment[systemName]||!0!==window.scriptSysPayment[systemName])return window.tildaForm.paysystemScriptLoad(linkScript,systemName),window.setTimeout(function(){window.tildaForm.paysystemRun(linkScript,systemName,form,functionCode,arArgs)},200),!1;var script=linkScript,sysname=systemName,functioncode=functionCode,objArgs=arArgs,$jform;"undefined"!=typeof jQuery&&($jform=$(form)),eval(functionCode)},window.tildaForm.paysystemSuccess=function(t,e){t instanceof Element||(t=t[0]),window.tildaForm.clearTCart(t);var o,r=document.getElementById("allrecords"),a=t.getAttribute("id"),i=t.querySelector(".js-successbox"),n="/tilda/"+a+"/payment/",s="Pay order in form "+a,d=e.amount,c=e.description,l="";window.Tilda&&"function"==typeof window.Tilda.sendEventToStatistics&&((o=r.getAttribute("data-tilda-currency")||"")||(o=(a=document.querySelector(".t706"))?a.getAttribute("data-project-currency-code"):""),o||r.setAttribute("data-tilda-currency",e.currency),window.Tilda.sendEventToStatistics(n,s,c,d)),t.tildaSuccessMessage&&(l=t.tildaSuccessMessage),e.successurl&&window.setTimeout(function(){window.location.href=e.successurl},300),i.innerHTML=l||"",t.tildaSuccessMessage="";l=t.getAttribute("data-success-callback");window.tildaForm.successEnd(t,e.successurl,l),t_triggerEvent(t,"tildaform:aftersuccess")},window.tildaForm.stripeLoad=function(){var t;window.stripeapiiscalled||((t=document.createElement("script")).type="text/javascript",t.src="https://checkout.stripe.com/checkout.js",document.body.appendChild(t),window.stripeapiiscalled=!0)},window.tildaForm.stripePay=function(n,s){if(n instanceof Element||(n=n[0]),!0!==window.stripeapiiscalled)return window.tildaForm.stripeLoad(),window.setTimeout(function(){window.tildaForm.stripePay(n,s)},200),!1;var d=document.getElementById("allrecords"),t=s.companyname,e=s.companylogo,t=t||window.location.host;if(!window.stripehandler){if("object"!=typeof window.StripeCheckout)return window.setTimeout(function(){window.tildaForm.stripePay(n,s)},200),!1;var o={key:s.accountid,image:e,name:t,locale:"auto"};s.zipCode&&1===s.zipCode&&(o.zipCode=!0),s.billingAddress&&1===s.billingAddress&&(o.billingAddress=!0),s.shipping&&1===s.shipping&&(o.shippingAddress=!0),window.stripehandler=window.StripeCheckout.configure(o),t_addEventListener(window,"popstate",function(){window.stripehandler.close()})}window.tildaForm.orderIdForStat=s.invoiceid;var r=100;s.multiple&&0<s.multiple&&(r=parseInt(s.multiple,10));var c=n.getAttribute("id");window.stripehandler.open({name:t,image:e,description:s.description,amount:parseInt((parseFloat(s.amount)*r).toFixed()),currency:s.currency,shippingAddress:"1"==s.shipping,email:""<s.email?s.email:"",token:function(t){var i;t&&t.id&&(t=[{name:"projectid",value:s.projectid},{name:"invoiceid",value:s.invoiceid},{name:"token",value:t.id},{name:"email",value:t.email},{name:"currency",value:s.currency},{name:"amount",value:parseInt((parseFloat(s.amount)*r).toFixed())}],t=t_forms__formData(t),(i=new XMLHttpRequest).open("POST","https://"+window.tildaForm.endpoint+"/payment/stripe/",!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),i.onreadystatechange=function(){var t,e,o,r,a;4===i.readyState&&200<=i.status&&i.status<400&&((r=i.responseText)&&"object"==typeof JSON.parse(r)&&(window.tildaForm.clearTCart(n),t="/tilda/"+c+"/payment/",e="Pay order in form "+c,a=s.amount,o=s.description,window.Tilda&&"function"==typeof window.Tilda.sendEventToStatistics&&(r=document.querySelector(".t706"),d.getAttribute("data-tilda-currency")||r&&r.getAttribute("data-project-currency-code")||d.setAttribute("data-tilda-currency",s.currency),window.Tilda.sendEventToStatistics(t,e,o,a)),n.tildaSuccessMessage&&(dataSuccessMessage=n.tildaSuccessMessage),s.successurl&&window.setTimeout(function(){window.location.href=s.successurl},300),successBox.innerHTML=dataSuccessMessage||"",n.tildaSuccessMessage="",a=n.getAttribute("data-success-callback"),window.tildaForm.successEnd(n,s.successurl,a),t_triggerEvent(n,"tildaform:aftersuccess")))},i.send(t))}})},window.tildaForm.cloudpaymentLoad=function(){var t;window.cloudpaymentsapiiscalled||((t=document.createElement("script")).type="text/javascript",t.src="https://widget.cloudpayments.ru/bundles/cloudpayments.js",document.body.appendChild(t),window.cloudpaymentsapiiscalled=!0)},window.tildaForm.cloudpaymentPay=function(i,n){if(i instanceof Element||(i=i[0]),!0!==window.cloudpaymentsapiiscalled)return window.tildaForm.cloudpaymentLoad(),window.setTimeout(function(){window.tildaForm.cloudpaymentPay(i,n)},200),!1;var s=document.getElementById("allrecords"),d=i.getAttribute("id"),c=i.querySelector(".js-successbox"),l="",u=n.currency,t={},e=(e=n.language)||("RUB"==u||"BYR"==u||"BYN"==u||"RUR"==u?"ru-RU":"UAH"==u?"uk":"en-US");if(!window.cloudpaymentshandler){if("object"!=typeof window.cp)return window.setTimeout(function(){window.tildaForm.cloudpaymentPay(i,n)},200),!1;t={language:e},n.applePaySupport&&"off"===n.applePaySupport&&(t.applePaySupport=!1),n.googlePaySupport&&"off"===n.googlePaySupport&&(t.googlePaySupport=!1),window.cloudpaymentshandler=new cp.CloudPayments(t)}t={};t.projectid=n.projectid,n.cloudPayments&&(n.cloudPayments.recurrent||n.cloudPayments.customerReceipt)&&(t.cloudPayments=n.cloudPayments);var m="",w=i.closest(".t-popup_show");return(w=w||i.closest(".t706__cartwin_showed"))&&(m=w.getAttribute("style"),w.style.zIndex=100),window.tildaForm.orderIdForStat=n.invoiceId,n.skin||(n.skin="classic"),window.cloudpaymentshandler.charge({publicId:n.publicId,description:n.description,amount:parseFloat(n.amount),currency:u,accountId:n.accountId,invoiceId:n.invoiceId,requireEmail:!0===n.requireEmail,email:n.email,skin:n.skin,data:t},function(t){window.cloudpaymentshandler=!1,w&&m&&w.setAttribute("style",m);var e="/tilda/"+d+"/payment/",o="Pay order in form "+d,r=n.amount,a=n.description;s.setAttribute("data-tilda-currency",u),window.Tilda&&"function"==typeof window.Tilda.sendEventToStatistics&&window.Tilda.sendEventToStatistics(e,o,a,r),window.tildaForm.clearTCart(i),n.successurl&&window.setTimeout(function(){window.location.href=n.successurl},300),i.tildaSuccessMessage&&(l=i.tildaSuccessMessage),c.innerHTML=l||"",i.tildaSuccessMessage="";r=i.getAttribute("data-success-callback");window.tildaForm.successEnd(i,n.successurl,r),t_triggerEvent(i,"tildaform:aftersuccess")},function(t,e){if(w&&m&&w.setAttribute("style",m),c.style.display="none",i.tildaSuccessMessage&&(l=i.tildaSuccessMessage),c.innerHTML=l||"",i.tildaSuccessMessage="",window.cloudpaymentshandler=!1,n.failureurl)window.location.href=n.failureurl;else{var o,r;w&&(o=w.querySelector(".t706__cartwin-products"),r=w.querySelector(".t706__cartwin-prodamount-wrap"),a=w.querySelector(".t706__form-bottom-text"),o&&(o.style.display="block"),r&&(r.style.display="block"),a&&(a.style.display="block"));var a=i.querySelector(".t-form__inputsbox");a&&(a.style.display="block");try{tcart__lockScroll()}catch(t){}}}),!1},window.tildaForm.sendStatAndShowMessage=function(form,arArgs,sendStat){form instanceof Element||(form=form[0]);var allRecords=document.getElementById("allrecords"),formId=form.getAttribute("id"),successBox=form.querySelector(".js-successbox"),dataSuccessPopup=form.getAttribute("data-success-popup"),dataSuccessMessage="",linkPage,title,price,product,t706block;sendStat&&(linkPage="/tilda/"+formId+"/payment/",title="Pay order in form "+formId,price=arArgs.amount,product=arArgs.description,window.Tilda&&"function"==typeof window.Tilda.sendEventToStatistics&&(t706block=document.querySelector(".t706"),allRecords.getAttribute("data-tilda-currency")||t706block&&t706block.getAttribute("data-project-currency-code")||allRecords.setAttribute("data-tilda-currency",arArgs.currency),window.Tilda.sendEventToStatistics(linkPage,title,product,price))),successBox&&("y"===dataSuccessPopup&&(successBox.style.display="none"),arArgs.successmessage?successBox.innerHTML=arArgs.successmessage:form.tildaSuccessMessage?successBox.innerHTML=form.tildaSuccessMessage:t_forms__getMsg("success")?successBox.innerHTML=t_forms__getMsg("success"):successBox.innerHTML="",form.tildaSuccessMessage="","y"===dataSuccessPopup?window.tildaForm.showSuccessPopup(successBox.textContent||successBox.innerText):successBox.style.display="block"),t_addClass(form,"js-send-form-success"),window.tildaForm.clearTCart(form),arArgs.successurl&&window.setTimeout(function(){window.location.href=arArgs.successurl},300);var successCallback=form.getAttribute("data-success-callback");successCallback&&0===successCallback.indexOf("window.")&&(successCallback=successCallback.split(".")[1]),successCallback&&"function"==typeof window[successCallback]&&("undefined"!=typeof jQuery?eval(successCallback+"($(form))"):eval(successCallback+"(form)"));var upwidgetRemoveBtns=form.querySelectorAll(".t-upwidget-container__data_table_actions_remove svg"),inputText=form.querySelectorAll('input[type="text"]'),inputPhone=form.querySelectorAll('input[type="tel"]'),inputTextarea=form.querySelectorAll("textarea");Array.prototype.forEach.call(upwidgetRemoveBtns,function(t){t_triggerEvent(t,"click")}),Array.prototype.forEach.call(inputText,function(t){t.value=""}),Array.prototype.forEach.call(inputPhone,function(t){t.value=""}),Array.prototype.forEach.call(inputTextarea,function(t){t.innerHTML="",t.value=""}),"undefined"!=typeof jQuery&&$(form).data("tildaformresult",{tranId:"0",orderId:"0"}),form.tildaTranId="0",form.tildaOrderId="0",t_triggerEvent(form,"tildaform:aftersuccess")},window.tildaForm.banktransferPay=function(a,r){function t(){t_removeClass(i,"t-body_popupshowed"),n&&t_removeEl(n);try{"function"==typeof tcart__closeCart&&(tcart__closeCart(),setTimeout(function(){var t=a.closest(".t-popup_show"),e=(t=t||a.closest(".t706__cartwin_showed")).querySelector(".t706__cartwin-products"),o=t.querySelector(".t706__cartwin-prodamount-wrap"),r=t.querySelector(".t706__form-bottom-text"),t=a.querySelector(".t-form__inputsbox");e&&(e.style.display="block"),o&&(o.style.display="block"),r&&(r.style.display="block"),t&&(t.style.display="block")},300))}catch(t){}return!1}function e(t){if((t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,(d=window.tildaForm.validate(s))&&0<d.length)return window.tildaForm.showErrors(s,d),!1;var t=t_serializeArray(s),t=t_forms__formData(t),o=new XMLHttpRequest;o.open("POST","https://"+window.tildaForm.endpoint+"/payment/banktransfer/",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState)if(200<=o.status&&o.status<400){var t=o.responseText;if(t){var e=JSON.parse(t);if("object"==typeof e){if(t_removeClass(i,"t-body_popupshowed"),n&&t_removeEl(n),(e=e||{error:"Unknown error. Please reload page and try again later."})&&e.error)return alert(e.error),!1;window.tildaForm.sendStatAndShowMessage(a,r,!0)}}}else t_removeClass(i,"t-body_popupshowed"),n&&t_removeEl(n),alert(e)},o.send(t)}var i,n,o,s,d;a instanceof Element||(a=a[0]),(!r||"fast"!==r.condition)&&r&&r.html?(i=document.body,document.getElementById("allrecords").insertAdjacentHTML("beforeend",'<div id="banktransfer">'+r.html+"</div>"),n=document.getElementById("banktransfer"),o=document.querySelector(".t-banktransfer").querySelector(".t-popup__close"),t_removeEventListener(o,"click",t),t_addEventListener(o,"click",t),t_addClass(i,"t-body_popupshowed"),s=document.getElementById("formbanktransfer"),d=[],s&&(t_removeEventListener(s,"submit",e),t_addEventListener(s,"submit",e))):window.tildaForm.sendStatAndShowMessage(a,r,!0)};